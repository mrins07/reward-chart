<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Rewards">
    <meta name="theme-color" content="#667eea">
    
    <!-- Embedded Apple Touch Icon -->
    <link rel="apple-touch-icon" href="data:image/png;base64,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">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>‚≠ê</text></svg>">
    
    <title>Maya & Surya's Reward Chart</title>
    <style>
        * {
            -webkit-tap-highlight-color: transparent;
            touch-action: pan-y;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: background 0.5s ease;
            overflow-x: hidden;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .header {
            background: rgba(255,255,255,0.95);
            padding: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .header-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .hamburger {
            width: 40px;
            height: 40px;
            border: none;
            background: transparent;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            justify-content: center;
            gap: 6px;
            padding: 8px;
        }
        
        .hamburger span {
            width: 100%;
            height: 3px;
            background: #667eea;
            border-radius: 2px;
            transition: all 0.3s;
        }
        
        .hamburger:active {
            transform: scale(0.9);
        }
        
        .header h1 {
            font-size: 1.5em;
            color: #667eea;
        }
        
        .selector {
            display: flex;
            gap: 8px;
        }
        
        .selector select {
            padding: 8px 12px;
            font-size: 0.9em;
            border: 2px solid #667eea;
            border-radius: 10px;
            background: white;
            font-weight: bold;
            color: #667eea;
        }
        
        .view-toggle {
            display: flex;
            gap: 5px;
            background: #f0f0f0;
            padding: 5px;
            border-radius: 10px;
        }
        
        .view-btn {
            padding: 8px 15px;
            border: none;
            border-radius: 8px;
            background: transparent;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            color: #666;
        }
        
        .view-btn.active {
            background: white;
            color: #667eea;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .main-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            padding-bottom: 80px;
        }
        
        .day-view {
            display: none;
            touch-action: pan-y;
        }
        
        .day-view.active {
            display: block;
        }
        
        .day-swipe-area {
            touch-action: pan-x;
        }
        
        .day-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .nav-arrow {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: white;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
            transition: all 0.3s;
        }
        
        .nav-arrow:active {
            transform: scale(0.9);
        }
        
        .day-date {
            text-align: center;
            color: white;
            font-size: 1.8em;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .day-card {
            background: white;
            border-radius: 30px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            min-height: 400px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 20px;
        }
        
        .day-number-large {
            font-size: 5em;
            font-weight: bold;
            color: #667eea;
        }
        
        .day-animal-large {
            font-size: 8em;
            animation: bounce 2s ease-in-out infinite;
            filter: drop-shadow(0 5px 15px rgba(0,0,0,0.2));
            margin: 20px 0;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        
        .motivational-quote {
            text-align: center;
            font-size: 1.2em;
            color: #667eea;
            font-weight: bold;
            font-style: italic;
            margin: 15px 0;
            padding: 15px;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 15px;
        }
        
        .day-icon-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 20px;
        }
        
        .day-icon-btn {
            width: 70px;
            height: 70px;
            font-size: 2.5em;
            border: 3px solid #ddd;
            border-radius: 15px;
            background: #f8f8f8;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .day-icon-btn.selected {
            border-color: #FF6B6B;
            background: linear-gradient(135deg, #FF6B6B 0%, #FFD700 25%, #4ECDC4 50%, #6C5CE7 75%, #FF69B4 100%);
            color: white;
            transform: scale(1.15);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.5);
            animation: rainbow-pulse 2s ease-in-out infinite;
        }
        
        .day-icon-btn[data-icon="bad"].selected {
            background: linear-gradient(135deg, #FF0000 0%, #FF4500 25%, #FF6347 50%, #FF8C00 75%, #FFA500 100%);
            border-color: #FF0000;
            box-shadow: 0 5px 20px rgba(255, 69, 0, 0.8);
            animation: fire-pulse 1.5s ease-in-out infinite;
        }
        
        @keyframes fire-pulse {
            0%, 100% { 
                filter: brightness(1) saturate(1);
                box-shadow: 0 5px 20px rgba(255, 69, 0, 0.8);
            }
            50% { 
                filter: brightness(1.3) saturate(1.5);
                box-shadow: 0 8px 30px rgba(255, 69, 0, 1);
            }
        }
        
        @keyframes rainbow-pulse {
            0%, 100% { filter: brightness(1) saturate(1); }
            50% { filter: brightness(1.2) saturate(1.3); }
        }
        
        .day-icon-btn:active {
            transform: scale(0.95);
        }
        
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            z-index: 9999;
            pointer-events: none;
        }
        
        @keyframes confetti-fall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
        
        .week-view {
            display: none;
        }
        
        .week-view.active {
            display: block;
        }
        
        .week-title {
            text-align: center;
            color: white;
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .week-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }
        
        .week-day {
            background: white;
            border-radius: 20px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .week-day:active {
            transform: scale(0.95);
        }
        
        .week-day.completed {
            background: linear-gradient(135deg, #fff9e6 0%, #ffd54f 100%);
        }
        
        .week-day.has-bad {
            background: linear-gradient(135deg, #ffebee 0%, #ef9a9a 100%);
        }
        
        .week-day-number {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }
        
        .week-day-animal {
            font-size: 3em;
            margin: 10px 0;
        }
        
        .week-day-icons {
            display: flex;
            gap: 5px;
            justify-content: center;
            font-size: 1.5em;
        }
        
        .month-view {
            display: none;
        }
        
        .month-view.active {
            display: block;
        }
        
        .rewards-view {
            display: none;
        }
        
        .rewards-view.active {
            display: block;
        }
        
        .rewards-title {
            text-align: center;
            color: white;
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .icon-counter {
            display: flex;
            justify-content: space-around;
            background: white;
            border-radius: 20px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .icon-count-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }
        
        .icon-count-emoji {
            font-size: 1.8em;
        }
        
        .icon-count-num {
            font-size: 1.3em;
            font-weight: bold;
            color: #667eea;
        }
        
        .spin-section {
            background: white;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .rewards-history {
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .rewards-history-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .rewards-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .no-rewards {
            text-align: center;
            color: #999;
            padding: 30px;
            font-style: italic;
        }
        
        .reward-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px;
            background: #f8f9ff;
            border-radius: 15px;
            border-left: 5px solid #667eea;
        }
        
        .reward-item.redeemed {
            background: #f0fff0;
            border-left-color: #4CAF50;
            opacity: 0.7;
        }
        
        .reward-item-info {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1;
        }
        
        .reward-item-emoji {
            font-size: 2em;
        }
        
        .reward-item-text {
            font-weight: bold;
            color: #333;
        }
        
        .reward-item-date {
            font-size: 0.8em;
            color: #999;
        }
        
        .reward-item.redeemed .reward-item-text {
            text-decoration: line-through;
            color: #999;
        }
        
        .redeem-btn {
            padding: 10px 15px;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .redeem-btn.pending {
            background: linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%);
            color: white;
        }
        
        .redeem-btn.done {
            background: #ddd;
            color: #999;
        }
        
        .redeem-btn:active {
            transform: scale(0.95);
        }
        
        .edit-rewards-section {
            margin-top: 20px;
        }
        
        .edit-rewards-toggle {
            width: 100%;
            padding: 15px;
            background: white;
            border: none;
            border-radius: 15px;
            font-size: 1em;
            cursor: pointer;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .edit-rewards-panel {
            display: none;
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-top: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .edit-rewards-panel.active {
            display: block;
        }
        
        .edit-rewards-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .edit-tab {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 10px;
            background: #eee;
            cursor: pointer;
            font-weight: bold;
        }
        
        .edit-tab.active {
            background: #667eea;
            color: white;
        }
        
        .add-reward-row {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .add-reward-row input {
            flex: 1;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1em;
        }
        
        .add-reward-row button {
            padding: 12px 20px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .edit-rewards-list {
            max-height: 300px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .edit-reward-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 15px;
            background: #f8f9ff;
            border-radius: 10px;
        }
        
        .edit-reward-item button {
            padding: 5px 12px;
            background: #f44336;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9em;
        }
        
        .reset-rewards-btn {
            width: 100%;
            padding: 12px;
            margin-top: 15px;
            background: #ff9800;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
        }
        
        .respin-btn {
            padding: 15px 30px;
            font-size: 1.1em;
            background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);
            color: white;
            border: none;
            border-radius: 15px;
            font-weight: bold;
            cursor: pointer;
            margin: 10px;
            box-shadow: 0 5px 15px rgba(255, 152, 0, 0.4);
        }
        
        .respin-btn:disabled {
            background: #ccc;
            box-shadow: none;
        }
        
        .month-title {
            text-align: center;
            color: white;
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .month-animal {
            text-align: center;
            font-size: 4em;
            margin-bottom: 20px;
            animation: bounce 2s ease-in-out infinite;
        }
        
        .month-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 6px;
            background: white;
            padding: 15px;
            border-radius: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        }
        
        .month-day-header {
            text-align: center;
            font-weight: bold;
            color: #667eea;
            font-size: 0.75em;
            padding: 5px;
        }
        
        .month-day {
            aspect-ratio: 1;
            border: 2px solid #667eea;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            background: white;
            transition: all 0.3s;
            position: relative;
            min-height: 40px;
        }
        
        .month-day.empty {
            border: none;
            background: transparent;
            cursor: default;
        }
        
        .month-day:not(.empty):active {
            transform: scale(0.95);
        }
        
        .month-day.completed {
            background: linear-gradient(135deg, #fff9e6 0%, #ffd54f 100%);
        }
        
        .month-day.has-bad {
            background: linear-gradient(135deg, #ffebee 0%, #ef9a9a 100%);
        }
        
        .month-day-number {
            font-size: 0.85em;
            font-weight: bold;
            color: #667eea;
        }
        
        .month-day-animal {
            font-size: 1em;
            display: none;
        }
        
        .month-day.completed .month-day-animal {
            display: block;
        }
        
        .month-day-icons {
            position: absolute;
            top: 1px;
            right: 1px;
            font-size: 0.5em;
            display: flex;
            gap: 1px;
        }
        
        .progress-bar {
            background: white;
            border-radius: 15px;
            padding: 15px;
            margin: 20px 0;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .progress-text {
            text-align: center;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }
        
        .progress-fill-bg {
            background: #e0e0e0;
            border-radius: 10px;
            height: 30px;
            overflow: hidden;
        }
        
        .progress-fill {
            background: linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%);
            height: 100%;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .reward-section {
            background: white;
            border-radius: 20px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .reward-input-wrapper {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .reward-label {
            font-size: 1.1em;
            font-weight: bold;
            white-space: nowrap;
            color: #667eea;
        }
        
        .reward-input {
            flex: 1;
            padding: 10px;
            font-size: 1em;
            border: none;
            border-bottom: 3px solid #667eea;
            background: transparent;
            font-weight: bold;
            min-height: 60px;
        }
        
        .reward-input:focus {
            outline: none;
            border-bottom-width: 4px;
        }
        
        .spin-wheel-btn {
            width: 100%;
            padding: 18px;
            font-size: 1.2em;
            background: linear-gradient(135deg, #FF6B6B 0%, #FF8E53 100%);
            color: white;
            border: none;
            border-radius: 15px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }
        
        .spin-wheel-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            box-shadow: none;
        }
        
        .spin-wheel-btn:active:not(:disabled) {
            transform: scale(0.98);
        }
        
        .spin-wheel-btn.available {
            animation: pulse-glow 2s ease-in-out infinite;
        }
        
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4); }
            50% { box-shadow: 0 5px 30px rgba(255, 107, 107, 0.8); }
        }
        
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 12px;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.2);
            display: flex;
            gap: 8px;
            z-index: 100;
        }
        
        .nav-btn {
            flex: 1;
            padding: 12px;
            font-size: 0.9em;
            border: none;
            border-radius: 12px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .nav-btn.print {
            background: #4CAF50;
            color: white;
        }
        
        .nav-btn.reset {
            background: #FF6B6B;
            color: white;
        }
        
        .nav-btn:active {
            transform: scale(0.95);
        }
        
        .wheel-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.9);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            padding: 20px;
        }
        
        .wheel-modal.active {
            display: flex;
        }
        
        .wheel-container {
            text-align: center;
            color: white;
            width: 100%;
            max-width: 500px;
        }
        
        .wheel-title {
            font-size: 1.5em;
            margin-bottom: 10px;
        }
        
        .wheel-spins-left {
            font-size: 1.2em;
            margin-bottom: 15px;
            color: #FFD700;
        }
        
        .slot-machine {
            background: linear-gradient(135deg, #FF6B6B 0%, #FF8E53 100%);
            border-radius: 25px;
            padding: 30px 20px;
            margin: 20px 0;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
        }
        
        .slots-container {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 20px 0;
        }
        
        .slot {
            width: 100px;
            height: 120px;
            background: white;
            border-radius: 15px;
            overflow: hidden;
            position: relative;
            box-shadow: inset 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .slot-reel {
            position: absolute;
            width: 100%;
            transition: transform 3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .slot-item {
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3em;
            background: white;
        }
        
        .slot-result {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 120px;
            border: 4px solid #FFD700;
            border-radius: 15px;
            pointer-events: none;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.8);
        }
        
        .results-display {
            display: none;
            gap: 10px;
            margin: 20px 0;
        }
        
        .results-display.active {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .result-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            min-width: 140px;
        }
        
        .result-card:hover {
            transform: scale(1.05);
            border-color: #FFD700;
            box-shadow: 0 5px 20px rgba(255, 215, 0, 0.5);
        }
        
        .result-card:active {
            transform: scale(0.95);
        }
        
        .result-emoji {
            font-size: 3em;
            margin-bottom: 10px;
        }
        
        .result-text {
            font-size: 0.9em;
            font-weight: bold;
            color: #333;
        }
        
        .winning-result {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            border-radius: 20px;
            padding: 30px;
            cursor: pointer;
            text-align: center;
            animation: winner-pulse 0.5s ease infinite alternate;
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.5);
        }
        
        @keyframes winner-pulse {
            from { transform: scale(1); }
            to { transform: scale(1.05); }
        }
        
        .winning-emoji {
            font-size: 3em;
            margin-bottom: 15px;
        }
        
        .winning-text {
            font-size: 1.5em;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
        }
        
        .winning-claim {
            font-size: 1.2em;
            font-weight: bold;
            color: white;
            background: #4CAF50;
            padding: 15px 25px;
            border-radius: 15px;
            display: inline-block;
        }
        
        .slot.selectable {
            cursor: pointer;
            animation: slot-glow 0.5s ease infinite alternate;
        }
        
        @keyframes slot-glow {
            from { box-shadow: 0 0 10px #FFD700; }
            to { box-shadow: 0 0 25px #FFD700, 0 0 40px #FFA500; }
        }
        
        .slot.selectable:active {
            transform: scale(0.95);
        }
        
        .pick-message {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            color: white;
        }
        
        .pick-title {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .pick-options {
            font-size: 0.9em;
            opacity: 0.9;
        }
        
        .wheel-spin-btn {
            padding: 18px 40px;
            font-size: 1.3em;
            background: linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%);
            color: white;
            border: none;
            border-radius: 20px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.5);
            margin: 15px;
        }
        
        .wheel-spin-btn:active {
            transform: scale(0.95);
        }
        
        .wheel-close {
            padding: 12px 30px;
            font-size: 1.1em;
            background: white;
            color: #333;
            border: none;
            border-radius: 15px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .stats-menu {
            position: fixed;
            top: 0;
            left: -100%;
            width: 85%;
            max-width: 350px;
            height: 100vh;
            background: white;
            box-shadow: 5px 0 20px rgba(0,0,0,0.3);
            z-index: 3000;
            transition: left 0.3s ease;
            overflow-y: auto;
        }
        
        .stats-menu.active {
            left: 0;
        }
        
        .stats-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 2999;
            display: none;
        }
        
        .stats-overlay.active {
            display: block;
        }
        
        .stats-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .stats-header h2 {
            margin: 0;
            font-size: 1.5em;
        }
        
        .stats-close {
            width: 35px;
            height: 35px;
            border: none;
            background: rgba(255,255,255,0.2);
            color: white;
            border-radius: 50%;
            font-size: 1.5em;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .stats-content {
            padding: 20px;
        }
        
        .stat-card {
            background: #f8f9ff;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 5px solid #667eea;
        }
        
        .stat-title {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 5px;
        }
        
        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
        }
        
        .stat-icons {
            display: flex;
            gap: 15px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .stat-icon-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1.1em;
        }
        
        .stat-icon-item span:first-child {
            font-size: 1.5em;
        }
        
        .stat-icon-item span:last-child {
            font-weight: bold;
            color: #667eea;
        }
        
        .notification-banner {
            position: fixed;
            top: -100px;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%);
            color: white;
            padding: 15px;
            text-align: center;
            font-weight: bold;
            z-index: 4000;
            box-shadow: 0 3px 10px rgba(0,0,0,0.3);
            transition: top 0.3s ease;
        }
        
        .notification-banner.show {
            top: 0;
        }
        
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(102, 126, 234, 0.9);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 5000;
        }
        
        .loading-overlay.active {
            display: flex;
        }
        
        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 5px solid rgba(255,255,255,0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .reward-photo-section {
            margin-top: 20px;
            padding: 15px;
            background: #f8f9ff;
            border-radius: 15px;
        }
        
        .reward-photo-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #667eea;
        }
        
        .reward-photos {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 10px;
        }
        
        .reward-photo {
            aspect-ratio: 1;
            border-radius: 10px;
            object-fit: cover;
            cursor: pointer;
            border: 2px solid #ddd;
        }
        
        .add-photo-btn {
            aspect-ratio: 1;
            border: 2px dashed #667eea;
            border-radius: 10px;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            color: #667eea;
            cursor: pointer;
        }
        
        .photo-input {
            display: none;
        }
        
        .spin-notification {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: #333;
            padding: 10px 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            text-align: center;
            font-weight: bold;
            animation: pulse-glow 2s ease-in-out infinite;
        }
        
    </style>
</head>
<body>
    <div class="notification-banner" id="notificationBanner">
        üìö Time to update your reward chart!
    </div>
    
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
    </div>
    
    <div class="stats-overlay" id="statsOverlay" onclick="toggleStatsMenu()"></div>
    
    <div class="stats-menu" id="statsMenu">
        <div class="stats-header">
            <h2>üìä Monthly Stats</h2>
            <button class="stats-close" onclick="toggleStatsMenu()">‚úï</button>
        </div>
        <div class="stats-content" id="statsContent">
        </div>
    </div>
    
    <div class="header">
        <div class="header-top">
            <div class="header-left">
                <button class="hamburger" onclick="toggleStatsMenu()">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <h1 id="mainTitle">üåü Reward Chart</h1>
            </div>
            <div class="selector">
                <select id="childSelect" onchange="updateChart()">
                    <option value="maya">Maya</option>
                    <option value="surya">Surya</option>
                </select>
                <select id="monthSelect" onchange="updateChart()">
                </select>
            </div>
        </div>
        <div class="view-toggle">
            <button class="view-btn active" onclick="switchView('day')">Day</button>
            <button class="view-btn" onclick="switchView('week')">Week</button>
            <button class="view-btn" onclick="switchView('month')">Month</button>
            <button class="view-btn" onclick="switchView('rewards')">üéÅ</button>
        </div>
    </div>
    
    <div class="main-content">
        <div class="day-view active day-swipe-area" id="dayView">
            <div class="day-navigation">
                <button class="nav-arrow" onclick="changeDay(-1)">‚óÄ</button>
                <div class="day-date" id="dayDate">Day 1</div>
                <button class="nav-arrow" onclick="changeDay(1)">‚ñ∂</button>
            </div>
            
            <div class="day-card">
                <div class="day-number-large" id="dayNumberLarge">1</div>
                <div class="motivational-quote" id="motivationalQuote">"You can do it!"</div>
                <div class="day-animal-large" id="dayAnimalLarge">ü¶´</div>
                
                <div class="day-icon-buttons" id="dayIconButtons">
                    <button class="day-icon-btn" data-icon="sun" onclick="toggleDayIcon('sun')">‚òÄÔ∏è</button>
                    <button class="day-icon-btn" data-icon="moon" onclick="toggleDayIcon('moon')">üåô</button>
                    <button class="day-icon-btn" data-icon="book" onclick="toggleDayIcon('book')">üìö</button>
                    <button class="day-icon-btn" data-icon="chores" onclick="toggleDayIcon('chores')">üßπ</button>
                    <button class="day-icon-btn" data-icon="star" onclick="toggleDayIcon('star')">‚≠ê</button>
                    <button class="day-icon-btn" data-icon="bad" onclick="toggleDayIcon('bad')">‚ùå</button>
                </div>
            </div>
        </div>
        
        <div class="week-view" id="weekView">
            <div class="week-title" id="weekTitle">Week 1 (Days 1-7)</div>
            <div class="week-grid" id="weekGrid"></div>
        </div>
        
        <div class="month-view" id="monthView">
            <div class="month-title" id="monthViewTitle"></div>
            <div class="month-animal" id="monthAnimal"></div>
            
            <div class="progress-bar">
                <div class="progress-text" id="progressText">0 / 31 completed</div>
                <div class="progress-fill-bg">
                    <div class="progress-fill" id="progressFill" style="width: 0%">0%</div>
                </div>
            </div>
            
            <div class="month-grid" id="monthGrid"></div>
            
            <div class="reward-photo-section" style="margin-top: 20px; background: white; border-radius: 20px; padding: 20px;">
                <div class="reward-photo-title">üì∏ Reward Photos</div>
                <div class="reward-photos" id="rewardPhotos">
                    <label class="add-photo-btn" for="photoInput">
                        üì∑
                    </label>
                </div>
                <input type="file" id="photoInput" class="photo-input" accept="image/*" capture="environment" onchange="addRewardPhoto(event)">
            </div>
        </div>
        
        <div class="rewards-view" id="rewardsView">
            <div class="rewards-title">üéÅ Rewards</div>
            
            <div class="icon-counter" id="iconCounter">
                <div class="icon-count-item">
                    <span class="icon-count-emoji">‚òÄÔ∏è</span>
                    <span class="icon-count-num" id="sunCount">0</span>
                </div>
                <div class="icon-count-item">
                    <span class="icon-count-emoji">üåô</span>
                    <span class="icon-count-num" id="moonCount">0</span>
                </div>
                <div class="icon-count-item">
                    <span class="icon-count-emoji">üìö</span>
                    <span class="icon-count-num" id="bookCount">0</span>
                </div>
                <div class="icon-count-item">
                    <span class="icon-count-emoji">üßπ</span>
                    <span class="icon-count-num" id="choresCount">0</span>
                </div>
                <div class="icon-count-item">
                    <span class="icon-count-emoji">‚≠ê</span>
                    <span class="icon-count-num" id="starCount">0</span>
                </div>
                <div class="icon-count-item">
                    <span class="icon-count-emoji">‚ùå</span>
                    <span class="icon-count-num" id="badCount">0</span>
                </div>
            </div>
            
            <div id="spinNotification"></div>
            
            <div class="spin-section">
                <button class="spin-wheel-btn" id="spinBtnWeekly" onclick="openWheel('mixed')" style="background: linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%);">
                    üé∞ SPIN THE SLOTS!
                </button>
                <button class="spin-wheel-btn" id="spinBtnBonus" onclick="openWheel('bigOnly')" style="background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%); margin-top: 10px;">
                    üèÜ BONUS MONTH-END SPIN!
                </button>
            </div>
            
            <div class="rewards-history">
                <div class="rewards-history-title">üèÜ Rewards Earned</div>
                <div class="rewards-list" id="rewardsList">
                    <div class="no-rewards">Get 10 stars to earn your first spin!</div>
                </div>
            </div>
            
            <div class="edit-rewards-section">
                <button class="edit-rewards-toggle" onclick="toggleEditRewards()">‚öôÔ∏è Edit Reward Options</button>
                <div class="edit-rewards-panel" id="editRewardsPanel">
                    <div class="edit-rewards-tabs">
                        <button class="edit-tab active" onclick="switchRewardTab('mixed')">Regular</button>
                        <button class="edit-tab" onclick="switchRewardTab('bigOnly')">Bonus</button>
                    </div>
                    <div class="add-reward-row">
                        <input type="text" id="newRewardInput" placeholder="New reward (e.g., Ice Cream üç¶)" maxlength="50">
                        <button onclick="addReward()">Add</button>
                    </div>
                    <div class="edit-rewards-list" id="editRewardsList"></div>
                    <button class="reset-rewards-btn" onclick="resetRewardsToDefault()">Reset to Default</button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="wheel-modal" id="wheelModal">
        <div class="wheel-container">
            <h2 class="wheel-title" id="wheelTitle">üé∞ SPIN THE SLOTS! üé∞</h2>
            <div class="wheel-spins-left" id="spinsLeft">Spins Remaining: 4</div>
            
            <div class="slot-machine">
                <div class="slots-container">
                    <div class="slot">
                        <div class="slot-reel" id="reel1"></div>
                        <div class="slot-result"></div>
                    </div>
                    <div class="slot">
                        <div class="slot-reel" id="reel2"></div>
                        <div class="slot-result"></div>
                    </div>
                    <div class="slot">
                        <div class="slot-reel" id="reel3"></div>
                        <div class="slot-result"></div>
                    </div>
                </div>
            </div>
            
            <div class="results-display" id="resultsDisplay">
            </div>
            
            <button class="wheel-spin-btn" id="wheelSpinBtn" onclick="spinSlots()">SPIN!</button>
            <button class="wheel-close" onclick="closeWheel()">Done</button>
        </div>
    </div>
    
    <div class="bottom-nav">
        <button class="nav-btn" style="background: #4CAF50; color: white;" onclick="exportData()">üì§ Backup</button>
        <button class="nav-btn" style="background: #2196F3; color: white;" onclick="document.getElementById('importInput').click()">üì• Restore</button>
        <button class="nav-btn" style="background: #f44336; color: white;" onclick="resetChart()">üîÑ Reset</button>
        <input type="file" id="importInput" accept=".json" style="display:none" onchange="importData(event)">
    </div>

    <script>
        // Month configuration with actual calendar data
        const monthsConfig = [
            { year: 2025, month: 11, name: 'December 2025', days: 31, startDay: 1 },
            { year: 2026, month: 0, name: 'January 2026', days: 31, startDay: 4 },
            { year: 2026, month: 1, name: 'February 2026', days: 28, startDay: 0 },
            { year: 2026, month: 2, name: 'March 2026', days: 31, startDay: 0 },
            { year: 2026, month: 3, name: 'April 2026', days: 30, startDay: 3 },
            { year: 2026, month: 4, name: 'May 2026', days: 31, startDay: 5 },
            { year: 2026, month: 5, name: 'June 2026', days: 30, startDay: 1 },
            { year: 2026, month: 6, name: 'July 2026', days: 31, startDay: 3 },
            { year: 2026, month: 7, name: 'August 2026', days: 31, startDay: 6 },
            { year: 2026, month: 8, name: 'September 2026', days: 30, startDay: 2 },
            { year: 2026, month: 9, name: 'October 2026', days: 31, startDay: 4 },
            { year: 2026, month: 10, name: 'November 2026', days: 30, startDay: 0 },
            { year: 2026, month: 11, name: 'December 2026', days: 31, startDay: 2 },
            { year: 2027, month: 0, name: 'January 2027', days: 31, startDay: 5 },
            { year: 2027, month: 1, name: 'February 2027', days: 28, startDay: 1 },
            { year: 2027, month: 2, name: 'March 2027', days: 31, startDay: 1 },
            { year: 2027, month: 3, name: 'April 2027', days: 30, startDay: 4 },
            { year: 2027, month: 4, name: 'May 2027', days: 31, startDay: 6 },
            { year: 2027, month: 5, name: 'June 2027', days: 30, startDay: 2 },
            { year: 2027, month: 6, name: 'July 2027', days: 31, startDay: 4 },
            { year: 2027, month: 7, name: 'August 2027', days: 31, startDay: 0 },
            { year: 2027, month: 8, name: 'September 2027', days: 30, startDay: 3 },
            { year: 2027, month: 9, name: 'October 2027', days: 31, startDay: 5 },
            { year: 2027, month: 10, name: 'November 2027', days: 30, startDay: 1 },
            { year: 2027, month: 11, name: 'December 2027', days: 31, startDay: 3 }
        ];

        function getDaysInMonth() {
            const monthIndex = parseInt(document.getElementById('monthSelect').value);
            return monthsConfig[monthIndex].days;
        }

        function getStartDayOfWeek() {
            const monthIndex = parseInt(document.getElementById('monthSelect').value);
            return monthsConfig[monthIndex].startDay;
        }

        const monthColors = [
            { bg: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', border: '#667eea' },
            { bg: 'linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%)', border: '#52c79f' },
            { bg: 'linear-gradient(135deg, #fa709a 0%, #fee140 100%)', border: '#fa709a' },
            { bg: 'linear-gradient(135deg, #30cfd0 0%, #330867 100%)', border: '#30cfd0' },
            { bg: 'linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)', border: '#7dd3c0' },
            { bg: 'linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)', border: '#fcb69f' },
            { bg: 'linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)', border: '#ff9a9e' },
            { bg: 'linear-gradient(135deg, #fbc2eb 0%, #a6c1ee 100%)', border: '#c99fdb' },
            { bg: 'linear-gradient(135deg, #fdcbf1 0%, #e6dee9 100%)', border: '#f5a5d8' },
            { bg: 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)', border: '#f093fb' },
            { bg: 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)', border: '#4facfe' },
            { bg: 'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)', border: '#43e97b' },
            { bg: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', border: '#667eea' },
            { bg: 'linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%)', border: '#52c79f' },
            { bg: 'linear-gradient(135deg, #fa709a 0%, #fee140 100%)', border: '#fa709a' },
            { bg: 'linear-gradient(135deg, #30cfd0 0%, #330867 100%)', border: '#30cfd0' },
            { bg: 'linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)', border: '#7dd3c0' },
            { bg: 'linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)', border: '#fcb69f' },
            { bg: 'linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)', border: '#ff9a9e' },
            { bg: 'linear-gradient(135deg, #fbc2eb 0%, #a6c1ee 100%)', border: '#c99fdb' },
            { bg: 'linear-gradient(135deg, #fdcbf1 0%, #e6dee9 100%)', border: '#f5a5d8' },
            { bg: 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)', border: '#f093fb' },
            { bg: 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)', border: '#4facfe' },
            { bg: 'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)', border: '#43e97b' },
            { bg: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', border: '#667eea' }
        ];

        const animals = {
            maya: [
                { name: 'Capybara', emoji: 'ü¶´', month: 'December 2025' },
                { name: 'Koala', emoji: 'üê®', month: 'January 2026' },
                { name: 'Unicorn', emoji: 'ü¶Ñ', month: 'February 2026' },
                { name: 'Panda', emoji: 'üêº', month: 'March 2026' },
                { name: 'Bunny', emoji: 'üê∞', month: 'April 2026' },
                { name: 'Cat', emoji: 'üê±', month: 'May 2026' },
                { name: 'Butterfly', emoji: 'ü¶ã', month: 'June 2026' },
                { name: 'Fox', emoji: 'ü¶ä', month: 'July 2026' },
                { name: 'Penguin', emoji: 'üêß', month: 'August 2026' },
                { name: 'Hamster', emoji: 'üêπ', month: 'September 2026' },
                { name: 'Otter', emoji: 'ü¶¶', month: 'October 2026' },
                { name: 'Sloth', emoji: 'ü¶•', month: 'November 2026' },
                { name: 'Seal', emoji: 'ü¶≠', month: 'December 2026' },
                { name: 'Deer', emoji: 'ü¶å', month: 'January 2027' },
                { name: 'Hedgehog', emoji: 'ü¶î', month: 'February 2027' },
                { name: 'Raccoon', emoji: 'ü¶ù', month: 'March 2027' },
                { name: 'Squirrel', emoji: 'üêøÔ∏è', month: 'April 2027' },
                { name: 'Dove', emoji: 'üïäÔ∏è', month: 'May 2027' },
                { name: 'Swan', emoji: 'ü¶¢', month: 'June 2027' },
                { name: 'Flamingo', emoji: 'ü¶©', month: 'July 2027' },
                { name: 'Peacock', emoji: 'ü¶ö', month: 'August 2027' },
                { name: 'Parrot', emoji: 'ü¶ú', month: 'September 2027' },
                { name: 'Duck', emoji: 'ü¶Ü', month: 'October 2027' },
                { name: 'Owl', emoji: 'ü¶â', month: 'November 2027' },
                { name: 'Chick', emoji: 'üê•', month: 'December 2027' }
            ],
            surya: [
                { name: 'Eagle', emoji: 'ü¶Ö', month: 'December 2025' },
                { name: 'Dolphin', emoji: 'üê¨', month: 'January 2026' },
                { name: 'Lion', emoji: 'ü¶Å', month: 'February 2026' },
                { name: 'Shark', emoji: 'ü¶à', month: 'March 2026' },
                { name: 'Tiger', emoji: 'üêØ', month: 'April 2026' },
                { name: 'T-Rex', emoji: 'ü¶ñ', month: 'May 2026' },
                { name: 'Wolf', emoji: 'üê∫', month: 'June 2026' },
                { name: 'Dragon', emoji: 'üêâ', month: 'July 2026' },
                { name: 'Gorilla', emoji: 'ü¶ç', month: 'August 2026' },
                { name: 'Crocodile', emoji: 'üêä', month: 'September 2026' },
                { name: 'Bear', emoji: 'üêª', month: 'October 2026' },
                { name: 'Rhino', emoji: 'ü¶è', month: 'November 2026' },
                { name: 'Leopard', emoji: 'üêÜ', month: 'December 2026' },
                { name: 'Elephant', emoji: 'üêò', month: 'January 2027' },
                { name: 'Hippo', emoji: 'ü¶õ', month: 'February 2027' },
                { name: 'Giraffe', emoji: 'ü¶í', month: 'March 2027' },
                { name: 'Zebra', emoji: 'ü¶ì', month: 'April 2027' },
                { name: 'Kangaroo', emoji: 'ü¶ò', month: 'May 2027' },
                { name: 'Bison', emoji: 'ü¶¨', month: 'June 2027' },
                { name: 'Ox', emoji: 'üêÇ', month: 'July 2027' },
                { name: 'Ram', emoji: 'üêè', month: 'August 2027' },
                { name: 'Boar', emoji: 'üêó', month: 'September 2027' },
                { name: 'Mammoth', emoji: 'ü¶£', month: 'October 2027' },
                { name: 'Camel', emoji: 'üê´', month: 'November 2027' },
                { name: 'Horse', emoji: 'üê¥', month: 'December 2027' }
            ]
        };

        const defaultRewards = {
            mixed: [
                'Extra Screen Time ‚è∞',
                '1 Hour Screen üì±',
                'Ice Cream üç¶',
                'Special Snack üçø',
                'Stay Up Late üåô',
                'Candy üç¨',
                'New Stickers üåü',
                'Extra Bedtime Story üìñ',
                'Choose Today\'s Show üì∫',
                '$2 üíµ',
                'Bake Cookies Together üç™',
                'Pick the Game Night üé≤',
                'Movie Theater üé≠',
                'Visit a Park üèûÔ∏è',
                'Buy a Book üìö',
                '$5 üíµ',
                'Dinner Date üçΩÔ∏è',
                'Movie Night üé¨',
                'Swimming Pool üèä',
                'New Art Supplies üé®',
                'Pizza Night üçï',
                'McDonald\'s üçî',
                'Playground Trip üé™',
                'Museum Day üèõÔ∏è',
                'Sleepover üõèÔ∏è',
                '2 Hours with Mom üë©‚Äçüëß',
                '2 Hours with Dad üë®‚Äçüëß',
                'Choose Weekend Activity üéØ',
                '3 Wishes ‚≠ê‚≠ê‚≠ê'
            ],
            bigOnly: [
                'Movie Theater üé≠',
                'Visit a Park üèûÔ∏è',
                'Buy a Book üìö',
                '$5 üíµ',
                'Dinner Date üçΩÔ∏è',
                'Movie Night üé¨',
                'Swimming Pool üèä',
                'New Art Supplies üé®',
                'Pizza Night üçï',
                'McDonald\'s üçî',
                'Playground Trip üé™',
                'Museum Day üèõÔ∏è',
                'Sleepover üõèÔ∏è',
                '2 Hours with Mom üë©‚Äçüëß',
                '2 Hours with Dad üë®‚Äçüëß',
                'Choose Weekend Activity üéØ',
                '3 Wishes ‚≠ê‚≠ê‚≠ê'
            ]
        };
        
        let allRewards = JSON.parse(localStorage.getItem('customRewards')) || JSON.parse(JSON.stringify(defaultRewards));
        
        function saveRewards() {
            localStorage.setItem('customRewards', JSON.stringify(allRewards));
        }
        
        let respinsRemaining = 0;

        const dailyAnimals = [
            'ü¶Å', 'üêØ', 'üêª', 'ü¶ä', 'üêº', 'üê®', 'ü¶ò', 'ü¶í', 'üêò', 'ü¶è',
            'ü¶õ', 'üêÜ', 'ü¶ì', 'üê™', 'ü¶ô', 'ü¶î', 'ü¶¶', 'ü¶´', 'ü¶ù', 'üêøÔ∏è',
            'ü¶®', 'ü¶°', 'üêæ', 'ü¶É', 'ü¶ö', 'ü¶ú', 'ü¶©', 'ü¶¢', 'ü¶Ü', 'ü¶Ö',
            'üê∏'
        ];

        const motivationalQuotes = [
            "You're amazing! üåü",
            "Keep going, superstar! ‚≠ê",
            "You've got this! üí™",
            "Believe in yourself! üåà",
            "You're doing great! üéâ",
            "One step at a time! üë£",
            "You're unstoppable! üöÄ",
            "Dream big! ‚ú®",
            "Stay awesome! üòé",
            "You're a champion! üèÜ",
            "Keep shining! ‚òÄÔ∏è",
            "You rock! üé∏",
            "Never give up! üí´",
            "You're incredible! üå∫",
            "Make it happen! üéØ",
            "You're special! üíù",
            "Stay positive! üåª",
            "You can do it! üé™",
            "Be proud of yourself! ü¶ã",
            "You're brilliant! üí°",
            "Keep smiling! üòä",
            "You're a star! ‚≠ê",
            "Reach for the sky! üå†",
            "You're powerful! ‚ö°",
            "Believe in magic! ü™Ñ",
            "You're wonderful! üå∏",
            "Stay strong! ü¶∏",
            "You're fantastic! üé®",
            "Keep dreaming! üåô",
            "You're the best! ü•á",
            "Almost there! üèÅ"
        ];

        let completedData = {};
        let currentView = 'day';
        let currentDay = 1;
        let wheelRewards = [];
        let isSpinning = false;
        let weeklySpinsRemaining = 0;
        let bonusSpinRemaining = 1;
        let touchStartX = 0;
        let touchEndX = 0;
        let currentWheelType = 'mixed';

        function initMonthSelector() {
            const select = document.getElementById('monthSelect');
            select.innerHTML = '';
            monthsConfig.forEach((config, index) => {
                const option = document.createElement('option');
                option.value = index;
                option.textContent = config.name;
                select.appendChild(option);
            });
        }

        function loadData() {
            const saved = localStorage.getItem('rewardChartData');
            if (saved) {
                completedData = JSON.parse(saved);
            }
        }

        function saveData() {
            localStorage.setItem('rewardChartData', JSON.stringify(completedData));
        }

        function vibrate(pattern = 10) {
            if ('vibrate' in navigator) {
                navigator.vibrate(pattern);
            }
        }

        function showLoading() {
            document.getElementById('loadingOverlay').classList.add('active');
        }

        function hideLoading() {
            setTimeout(() => {
                document.getElementById('loadingOverlay').classList.remove('active');
            }, 300);
        }

        function addRewardPhoto(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const key = getStorageKey();
                if (!completedData[key + '_photos']) {
                    completedData[key + '_photos'] = [];
                }
                
                completedData[key + '_photos'].push(e.target.result);
                saveData();
                displayRewardPhotos();
                vibrate(20);
            };
            reader.readAsDataURL(file);
        }

        function displayRewardPhotos() {
            const key = getStorageKey();
            const photos = completedData[key + '_photos'] || [];
            const container = document.getElementById('rewardPhotos');
            
            container.innerHTML = `
                <label class="add-photo-btn" for="photoInput">
                    üì∑
                </label>
            `;
            
            photos.forEach((photoData, index) => {
                const img = document.createElement('img');
                img.src = photoData;
                img.className = 'reward-photo';
                img.onclick = () => viewPhoto(photoData);
                container.appendChild(img);
            });
        }

        function viewPhoto(photoData) {
            const win = window.open();
            win.document.write(`<img src="${photoData}" style="width:100%; height:auto;">`);
        }

        function getStorageKey() {
            const child = document.getElementById('childSelect').value;
            const month = document.getElementById('monthSelect').value;
            return `${child}_${month}`;
        }

        function switchView(view) {
            showLoading();
            currentView = view;
            document.querySelectorAll('.view-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            document.getElementById('dayView').classList.remove('active');
            document.getElementById('weekView').classList.remove('active');
            document.getElementById('monthView').classList.remove('active');
            document.getElementById('rewardsView').classList.remove('active');
            
            setTimeout(() => {
                document.getElementById(view + 'View').classList.add('active');
                
                if (view === 'week') renderWeekView();
                if (view === 'month') renderMonthView();
                if (view === 'rewards') renderRewardsView();
                
                hideLoading();
                vibrate(10);
            }, 100);
        }

        function changeDay(delta) {
            const daysInMonth = getDaysInMonth();
            currentDay = Math.max(1, Math.min(daysInMonth, currentDay + delta));
            renderDayView();
            vibrate(10);
        }

        function handleTouchStart(e) {
            touchStartX = e.changedTouches[0].screenX;
        }

        function handleTouchEnd(e) {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        }

        function handleSwipe() {
            const swipeThreshold = 50;
            const diff = touchStartX - touchEndX;
            
            if (Math.abs(diff) > swipeThreshold) {
                if (diff > 0) {
                    changeDay(1);
                } else {
                    changeDay(-1);
                }
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            const dayView = document.getElementById('dayView');
            dayView.addEventListener('touchstart', handleTouchStart, false);
            dayView.addEventListener('touchend', handleTouchEnd, false);
        });

        function renderDayView() {
            const child = document.getElementById('childSelect').value;
            const monthIndex = parseInt(document.getElementById('monthSelect').value);
            const animal = animals[child][monthIndex];
            const key = getStorageKey();
            const completed = completedData[key] || {};
            const ratings = completedData[key + '_ratings'] || {};
            const daysInMonth = getDaysInMonth();
            
            if (currentDay > daysInMonth) {
                currentDay = daysInMonth;
            }
            
            // Get month abbreviation
            const monthName = monthsConfig[monthIndex].name.split(' ')[0]; // "December" from "December 2025"
            const monthAbbr = monthName.substring(0, 3); // "Dec"
            
            document.getElementById('dayDate').textContent = `${monthAbbr} ${currentDay}`;
            document.getElementById('dayNumberLarge').textContent = currentDay;
            
            const dayAnimal = dailyAnimals[(currentDay - 1) % dailyAnimals.length];
            document.getElementById('dayAnimalLarge').textContent = dayAnimal;
            
            const quote = motivationalQuotes[(currentDay - 1) % motivationalQuotes.length];
            document.getElementById('motivationalQuote').textContent = quote;
            
            const rating = ratings[currentDay] || { suns: 0, moons: 0, stars: 0, books: 0, chores: 0, bad: 0 };
            
            document.querySelectorAll('.day-icon-btn').forEach(btn => {
                const icon = btn.dataset.icon;
                const field = icon === 'sun' ? 'suns' : icon === 'moon' ? 'moons' : icon === 'star' ? 'stars' : icon === 'book' ? 'books' : icon === 'chores' ? 'chores' : 'bad';
                const isSelected = rating[field] > 0;
                btn.classList.toggle('selected', isSelected);
            });
        }

        function toggleDayIcon(iconType) {
            const key = getStorageKey();
            if (!completedData[key]) completedData[key] = {};
            if (!completedData[key + '_ratings']) completedData[key + '_ratings'] = {};
            if (!completedData[key + '_ratings'][currentDay]) {
                completedData[key + '_ratings'][currentDay] = { suns: 0, moons: 0, stars: 0, books: 0, chores: 0, bad: 0 };
            }
            
            completedData[key][currentDay] = true;
            
            const rating = completedData[key + '_ratings'][currentDay];
            const field = iconType === 'sun' ? 'suns' : iconType === 'moon' ? 'moons' : iconType === 'star' ? 'stars' : iconType === 'book' ? 'books' : iconType === 'chores' ? 'chores' : 'bad';
            const wasSelected = rating[field] === 1;
            rating[field] = rating[field] === 1 ? 0 : 1;
            
            vibrate(15);
            
            // Trigger confetti every time an icon is selected (not deselected, not for bad/cross)
            if (rating[field] === 1 && iconType !== 'bad') {
                setTimeout(() => {
                    launchConfetti();
                }, 100);
            }
            
            // Check if a star was just added
            if (iconType === 'star' && !wasSelected && rating[field] === 1) {
                saveData();
                
                const totalStars = getTotalStars();
                
                // Check for bonus at 20 first
                if (totalStars === 20) {
                    setTimeout(() => {
                        alert('üèÜ 20 STARS! BONUS SPIN UNLOCKED! üèÜ');
                    }, 500);
                }
                // Check for regular spin milestones (10, 30, 40, etc - not 20)
                else if (totalStars > 0 && totalStars % 10 === 0) {
                    setTimeout(() => {
                        alert(`üéâ ${totalStars} stars! You earned a SPIN! üé∞`);
                    }, 500);
                }
            }
            
            saveData();
            renderDayView();
        }

        function launchConfetti() {
            const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#FFA07A', '#98D8C8', '#F7DC6F', '#FF85A2', '#6C5CE7', '#FFD700', '#FF69B4'];
            const confettiCount = 100;
            
            for (let i = 0; i < confettiCount; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.top = '-10px';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animation = `confetti-fall ${2 + Math.random() * 2}s linear forwards`;
                    confetti.style.animationDelay = Math.random() * 0.3 + 's';
                    
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => {
                        confetti.remove();
                    }, 4000);
                }, i * 20);
            }
        }

        function renderWeekView() {
            const child = document.getElementById('childSelect').value;
            const monthIndex = parseInt(document.getElementById('monthSelect').value);
            const animal = animals[child][monthIndex];
            const key = getStorageKey();
            const completed = completedData[key] || {};
            const ratings = completedData[key + '_ratings'] || {};
            const daysInMonth = getDaysInMonth();
            
            const weekNum = Math.ceil(currentDay / 7);
            const startDay = (weekNum - 1) * 7 + 1;
            const endDay = Math.min(startDay + 6, daysInMonth);
            
            document.getElementById('weekTitle').textContent = `Week ${weekNum} (Days ${startDay}-${endDay})`;
            
            const grid = document.getElementById('weekGrid');
            grid.innerHTML = '';
            
            for (let i = startDay; i <= endDay; i++) {
                const day = document.createElement('div');
                day.className = 'week-day';
                if (completed[i]) {
                    const rating = ratings[i] || { suns: 0, moons: 0, stars: 0, books: 0, chores: 0, bad: 0 };
                    if (rating.bad > 0) {
                        day.classList.add('has-bad');
                    } else {
                        day.classList.add('completed');
                    }
                }
                
                const rating = ratings[i] || { suns: 0, moons: 0, stars: 0, books: 0, chores: 0, bad: 0 };
                let icons = '';
                if (rating.bad > 0) icons += '‚ùå';
                if (rating.suns > 0) icons += '‚òÄÔ∏è';
                if (rating.moons > 0) icons += 'üåô';
                if (rating.books > 0) icons += 'üìö';
                if (rating.chores > 0) icons += 'üßπ';
                if (rating.stars > 0) icons += '‚≠ê';
                
                const dayAnimal = dailyAnimals[(i - 1) % dailyAnimals.length];
                
                day.innerHTML = `
                    <div class="week-day-number">${i}</div>
                    <div class="week-day-animal">${completed[i] ? dayAnimal : ''}</div>
                    <div class="week-day-icons">${icons}</div>
                `;
                
                day.onclick = () => {
                    currentDay = i;
                    switchView('day');
                    renderDayView();
                };
                
                grid.appendChild(day);
            }
        }

        function renderMonthView() {
            const child = document.getElementById('childSelect').value;
            const monthIndex = parseInt(document.getElementById('monthSelect').value);
            const animal = animals[child][monthIndex];
            const key = getStorageKey();
            const completed = completedData[key] || {};
            const ratings = completedData[key + '_ratings'] || {};
            const daysInMonth = getDaysInMonth();
            const startDayOfWeek = getStartDayOfWeek();
            
            document.getElementById('monthViewTitle').textContent = animal.month;
            document.getElementById('monthAnimal').textContent = animal.emoji;
            
            const grid = document.getElementById('monthGrid');
            grid.innerHTML = '';
            
            const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            dayNames.forEach(name => {
                const header = document.createElement('div');
                header.className = 'month-day-header';
                header.textContent = name;
                grid.appendChild(header);
            });
            
            for (let i = 0; i < startDayOfWeek; i++) {
                const empty = document.createElement('div');
                empty.className = 'month-day empty';
                grid.appendChild(empty);
            }
            
            for (let i = 1; i <= daysInMonth; i++) {
                const day = document.createElement('div');
                day.className = 'month-day';
                day.style.borderColor = monthColors[monthIndex].border;
                
                if (completed[i]) {
                    const rating = ratings[i] || { suns: 0, moons: 0, stars: 0, books: 0, chores: 0, bad: 0 };
                    day.classList.add('completed');
                    if (rating.bad > 0) {
                        day.classList.add('has-bad');
                    }
                }
                
                const rating = ratings[i] || { suns: 0, moons: 0, stars: 0, books: 0, chores: 0, bad: 0 };
                let icons = '';
                if (rating.bad > 0) icons += '‚ùå';
                if (rating.suns > 0) icons += '‚òÄÔ∏è';
                if (rating.moons > 0) icons += 'üåô';
                if (rating.books > 0) icons += 'üìö';
                if (rating.chores > 0) icons += 'üßπ';
                if (rating.stars > 0) icons += '‚≠ê';
                
                const dayAnimal = dailyAnimals[(i - 1) % dailyAnimals.length];
                
                day.innerHTML = `
                    ${icons ? `<div class="month-day-icons">${icons}</div>` : ''}
                    <div class="month-day-number">${i}</div>
                    <div class="month-day-animal">${dayAnimal}</div>
                `;
                
                day.onclick = () => {
                    currentDay = i;
                    switchView('day');
                    renderDayView();
                };
                
                grid.appendChild(day);
            }
            
            updateProgress();
            updateSpinButton();
        }

        function updateProgress() {
            const key = getStorageKey();
            const completed = completedData[key] || {};
            const daysInMonth = getDaysInMonth();
            const count = Object.values(completed).filter(v => v).length;
            const percentage = Math.round((count / daysInMonth) * 100);
            
            document.getElementById('progressText').textContent = `${count} / ${daysInMonth} completed`;
            document.getElementById('progressFill').style.width = `${percentage}%`;
            document.getElementById('progressFill').textContent = `${percentage}%`;
        }

        function updateChart() {
            showLoading();
            
            const child = document.getElementById('childSelect').value;
            const monthIndex = parseInt(document.getElementById('monthSelect').value);
            const colors = monthColors[monthIndex];
            
            const childName = child === 'maya' ? 'Maya' : 'Surya';
            document.getElementById('mainTitle').textContent = `üåü ${childName}`;
            document.body.style.background = colors.bg;
            
            const daysInMonth = getDaysInMonth();
            if (currentDay > daysInMonth) {
                currentDay = 1;
            }
            
            setTimeout(() => {
                if (currentView === 'day') renderDayView();
                if (currentView === 'week') renderWeekView();
                if (currentView === 'month') {
                    renderMonthView();
                    displayRewardPhotos();
                }
                if (currentView === 'rewards') renderRewardsView();
                hideLoading();
            }, 100);
        }

        function getTotalStars() {
            const key = getStorageKey();
            const ratings = completedData[key + '_ratings'] || {};
            const daysInMonth = getDaysInMonth();
            
            let totalStars = 0;
            for (let i = 1; i <= daysInMonth; i++) {
                const rating = ratings[i] || {};
                if (rating.stars > 0) {
                    totalStars++;
                }
            }
            return totalStars;
        }
        
        function getSpinsEarned() {
            const totalStars = getTotalStars();
            return Math.floor(totalStars / 10); // 1 spin per 10 stars
        }

        function getSpinsUsed() {
            const key = getStorageKey();
            return completedData[key + '_spinsUsed'] || 0;
        }

        function getSpinsAvailable() {
            return Math.max(0, getSpinsEarned() - getSpinsUsed());
        }

        function openWheel(wheelType) {
            currentWheelType = wheelType;
            const key = getStorageKey();
            
            if (wheelType === 'mixed') {
                weeklySpinsRemaining = getSpinsAvailable();
            } else {
                const totalStars = getTotalStars();
                const bonusUsed = completedData[key + '_bonusUsed'] || false;
                bonusSpinRemaining = (totalStars >= 20 && !bonusUsed) ? 1 : 0;
            }
            
            respinsRemaining = 2; // Allow 2 re-spins per spin
            
            const rewardPool = allRewards[wheelType];
            wheelRewards = rewardPool;
            
            document.getElementById('wheelModal').classList.add('active');
            document.getElementById('resultsDisplay').classList.remove('active');
            document.getElementById('wheelSpinBtn').style.display = 'block';
            updateSpinsDisplay();
            populateReels();
        }

        function populateReels() {
            for (let i = 1; i <= 3; i++) {
                const reel = document.getElementById(`reel${i}`);
                const shuffled = [...wheelRewards].sort(() => Math.random() - 0.5);
                
                let html = '';
                for (let j = 0; j < 20; j++) {
                    const reward = shuffled[j % shuffled.length];
                    const emoji = reward.split(' ')[reward.split(' ').length - 1];
                    html += `<div class="slot-item">${emoji}</div>`;
                }
                reel.innerHTML = html;
                reel.style.transform = 'translateY(0)';
            }
        }

        function spinSlots() {
            if (isSpinning) return;
            
            isSpinning = true;
            const spinBtn = document.getElementById('wheelSpinBtn');
            spinBtn.disabled = true;
            
            vibrate([10, 50, 10, 50, 10]);
            
            // Pick 3 different rewards
            const shuffled = [...wheelRewards].sort(() => Math.random() - 0.5);
            const results = [shuffled[0], shuffled[1], shuffled[2]];
            
            for (let i = 1; i <= 3; i++) {
                const reel = document.getElementById(`reel${i}`);
                const spins = 2400 + (i * 200);
                
                reel.style.transition = `transform ${2 + i * 0.3}s cubic-bezier(0.25, 0.46, 0.45, 0.94)`;
                reel.style.transform = `translateY(-${spins}px)`;
            }
            
            setTimeout(() => {
                // Set each reel to show its result
                for (let i = 1; i <= 3; i++) {
                    const reel = document.getElementById(`reel${i}`);
                    const slot = reel.parentElement; // .slot container
                    const reward = results[i - 1];
                    const emoji = reward.split(' ').pop();
                    
                    reel.style.transition = 'none';
                    reel.innerHTML = `<div class="slot-item">${emoji}</div>`.repeat(20);
                    reel.style.transform = 'translateY(-120px)';
                    
                    // Make slot clickable
                    slot.classList.add('selectable');
                    slot.onclick = () => claimReward(reward);
                }
                
                showPickMessage(results);
                isSpinning = false;
            }, 3500);
        }

        function showPickMessage(results) {
            const resultsDiv = document.getElementById('resultsDisplay');
            
            const respinBtnHtml = respinsRemaining > 0 
                ? `<button class="respin-btn" onclick="respin()">üîÑ Re-spin (${respinsRemaining} left)</button>`
                : `<button class="respin-btn" disabled>No re-spins left</button>`;
            
            resultsDiv.innerHTML = `
                <div class="pick-message">
                    <div class="pick-title">üéâ TAP YOUR PRIZE! üéâ</div>
                    <div class="pick-options">
                        ${results.map(r => {
                            const text = r.substring(0, r.lastIndexOf(' ')).trim() || r;
                            return `<span>${text}</span>`;
                        }).join(' ‚Ä¢ ')}
                    </div>
                    ${respinBtnHtml}
                </div>
            `;
            
            resultsDiv.classList.add('active');
            document.getElementById('wheelSpinBtn').style.display = 'none';
            
            vibrate([50, 100, 50]);
        }
        
        function respin() {
            if (respinsRemaining <= 0 || isSpinning) return;
            
            respinsRemaining--;
            
            // Clean up selectable slots
            document.querySelectorAll('.slot').forEach(slot => {
                slot.classList.remove('selectable');
                slot.onclick = null;
            });
            
            document.getElementById('resultsDisplay').classList.remove('active');
            populateReels();
            
            // Trigger spin
            spinSlots();
        }
        
        function claimReward(reward) {
            const key = getStorageKey();
            
            // Remove clickable from slots
            document.querySelectorAll('.slot').forEach(slot => {
                slot.classList.remove('selectable');
                slot.onclick = null;
            });
            
            // Store reward with date and redeemed status
            if (!completedData[key + '_rewardHistory']) {
                completedData[key + '_rewardHistory'] = [];
            }
            
            const rewardObj = {
                reward: reward,
                date: new Date().toLocaleDateString(),
                redeemed: false
            };
            
            completedData[key + '_rewardHistory'].push(rewardObj);
            
            if (currentWheelType === 'mixed') {
                const spinsUsed = getSpinsUsed() + 1;
                completedData[key + '_spinsUsed'] = spinsUsed;
                weeklySpinsRemaining = getSpinsAvailable();
            } else {
                completedData[key + '_bonusUsed'] = true;
                bonusSpinRemaining = 0;
            }
            
            saveData();
            
            vibrate([20, 100, 20]);
            launchConfetti();
            
            const bonusMessage = currentWheelType === 'bigOnly' ? '\n\nüèÜ BONUS SPIN! BIG REWARD! üèÜ' : '';
            alert(`üéâ YOU WON: ${reward} üéâ${bonusMessage}`);
            
            closeWheel();
        }

        function closeWheel() {
            document.getElementById('wheelModal').classList.remove('active');
            
            // Clean up selectable slots
            document.querySelectorAll('.slot').forEach(slot => {
                slot.classList.remove('selectable');
                slot.onclick = null;
            });
            
            updateSpinButton();
            if (currentView === 'rewards') {
                renderRewardsView();
            }
        }

        function updateSpinsDisplay() {
            const spins = currentWheelType === 'mixed' ? weeklySpinsRemaining : bonusSpinRemaining;
            const wheelTitle = currentWheelType === 'mixed' ? 'üé∞ SPIN THE SLOTS! üé∞' : 'üèÜ BONUS SLOTS - BIG REWARDS! üèÜ';
            
            document.getElementById('wheelTitle').textContent = wheelTitle;
            document.getElementById('spinsLeft').textContent = `Spins Available: ${spins}`;
            
            const spinBtn = document.getElementById('wheelSpinBtn');
            if (spins <= 0) {
                spinBtn.disabled = true;
                spinBtn.textContent = 'No Spins Available';
            } else {
                spinBtn.disabled = false;
                spinBtn.textContent = 'SPIN!';
            }
        }

        function renderRewardsView() {
            const key = getStorageKey();
            const rewardHistory = completedData[key + '_rewardHistory'] || [];
            const ratings = completedData[key + '_ratings'] || {};
            const daysInMonth = getDaysInMonth();
            
            // Count icons
            let sunCount = 0, moonCount = 0, bookCount = 0, choresCount = 0, starCount = 0, badCount = 0;
            for (let i = 1; i <= daysInMonth; i++) {
                const rating = ratings[i] || {};
                sunCount += rating.suns || 0;
                moonCount += rating.moons || 0;
                bookCount += rating.books || 0;
                choresCount += rating.chores || 0;
                starCount += rating.stars || 0;
                badCount += rating.bad || 0;
            }
            
            document.getElementById('sunCount').textContent = sunCount;
            document.getElementById('moonCount').textContent = moonCount;
            document.getElementById('bookCount').textContent = bookCount;
            document.getElementById('choresCount').textContent = choresCount;
            document.getElementById('starCount').textContent = starCount;
            document.getElementById('badCount').textContent = badCount;
            
            const list = document.getElementById('rewardsList');
            
            if (rewardHistory.length === 0) {
                list.innerHTML = '<div class="no-rewards">Get 10 stars to earn your first spin!</div>';
            } else {
                list.innerHTML = rewardHistory.map((item, index) => {
                    const emoji = item.reward.split(' ').pop();
                    const text = item.reward.substring(0, item.reward.lastIndexOf(' ')).trim() || item.reward;
                    
                    return `
                        <div class="reward-item ${item.redeemed ? 'redeemed' : ''}">
                            <div class="reward-item-info">
                                <div class="reward-item-emoji">${emoji}</div>
                                <div>
                                    <div class="reward-item-text">${text}</div>
                                    <div class="reward-item-date">${item.date}</div>
                                </div>
                            </div>
                            <button class="redeem-btn ${item.redeemed ? 'done' : 'pending'}" onclick="toggleRedeemed(${index})">
                                ${item.redeemed ? '‚úì Used' : 'Redeem'}
                            </button>
                        </div>
                    `;
                }).join('');
            }
            
            updateSpinButton();
        }
        
        let currentEditTab = 'mixed';
        
        function toggleEditRewards() {
            const panel = document.getElementById('editRewardsPanel');
            panel.classList.toggle('active');
            if (panel.classList.contains('active')) {
                renderEditRewardsList();
            }
        }
        
        function switchRewardTab(tab) {
            currentEditTab = tab;
            document.querySelectorAll('.edit-tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            renderEditRewardsList();
        }
        
        function renderEditRewardsList() {
            const list = document.getElementById('editRewardsList');
            const rewards = allRewards[currentEditTab];
            
            list.innerHTML = rewards.map((reward, index) => `
                <div class="edit-reward-item">
                    <span>${reward}</span>
                    <button onclick="removeReward(${index})">‚úï</button>
                </div>
            `).join('');
        }
        
        function addReward() {
            const input = document.getElementById('newRewardInput');
            const reward = input.value.trim();
            
            if (reward) {
                allRewards[currentEditTab].push(reward);
                saveRewards();
                renderEditRewardsList();
                input.value = '';
                vibrate(10);
            }
        }
        
        function removeReward(index) {
            allRewards[currentEditTab].splice(index, 1);
            saveRewards();
            renderEditRewardsList();
            vibrate(10);
        }
        
        function resetRewardsToDefault() {
            allRewards = JSON.parse(JSON.stringify(defaultRewards));
            saveRewards();
            renderEditRewardsList();
            vibrate(20);
            alert('‚úÖ Rewards reset to default!');
        }
        
        function toggleRedeemed(index) {
            const key = getStorageKey();
            const rewardHistory = completedData[key + '_rewardHistory'] || [];
            
            if (rewardHistory[index]) {
                rewardHistory[index].redeemed = !rewardHistory[index].redeemed;
                completedData[key + '_rewardHistory'] = rewardHistory;
                saveData();
                
                if (rewardHistory[index].redeemed) {
                    vibrate([20, 50, 20]);
                    launchConfetti();
                } else {
                    vibrate(10);
                }
                
                renderRewardsView();
            }
        }

        function updateSpinButton() {
            const key = getStorageKey();
            const totalStars = getTotalStars();
            
            const weeklyBtn = document.getElementById('spinBtnWeekly');
            const bonusBtn = document.getElementById('spinBtnBonus');
            const notificationDiv = document.getElementById('spinNotification');
            
            const spinsAvailable = getSpinsAvailable();
            const nextSpinAt = (getSpinsEarned() + 1) * 10;
            
            if (spinsAvailable > 0) {
                weeklyBtn.disabled = false;
                weeklyBtn.classList.add('available');
                weeklyBtn.textContent = `üé∞ SPIN THE SLOTS! (${spinsAvailable} available)`;
                notificationDiv.innerHTML = `<div class="spin-notification">üéâ You have ${spinsAvailable} spin${spinsAvailable > 1 ? 's' : ''} waiting! üé∞</div>`;
            } else {
                weeklyBtn.disabled = true;
                weeklyBtn.classList.remove('available');
                weeklyBtn.textContent = `Get ${nextSpinAt} ‚≠ê for next spin! (${totalStars} stars)`;
                notificationDiv.innerHTML = '';
            }
            
            const bonusUsed = completedData[key + '_bonusUsed'] || false;
            
            if (totalStars >= 20 && !bonusUsed) {
                bonusBtn.disabled = false;
                bonusBtn.classList.add('available');
                bonusBtn.textContent = 'üèÜ BONUS SLOT! (Big Rewards Only!)';
            } else if (totalStars >= 20 && bonusUsed) {
                bonusBtn.disabled = true;
                bonusBtn.classList.remove('available');
                bonusBtn.textContent = '‚úì Bonus Spin Used!';
            } else {
                bonusBtn.disabled = true;
                bonusBtn.classList.remove('available');
                bonusBtn.textContent = `Get 20 ‚≠ê for BONUS! (${totalStars}/20 stars)`;
            }
        }

        function toggleStatsMenu() {
            const menu = document.getElementById('statsMenu');
            const overlay = document.getElementById('statsOverlay');
            
            menu.classList.toggle('active');
            overlay.classList.toggle('active');
            
            if (menu.classList.contains('active')) {
                updateStats();
            }
        }

        function updateStats() {
            const child = document.getElementById('childSelect').value;
            const monthIndex = parseInt(document.getElementById('monthSelect').value);
            const animal = animals[child][monthIndex];
            const key = getStorageKey();
            const completed = completedData[key] || {};
            const ratings = completedData[key + '_ratings'] || {};
            const daysInMonth = getDaysInMonth();
            
            let totalCompleted = 0;
            let totalSuns = 0;
            let totalMoons = 0;
            let totalStars = 0;
            let totalBooks = 0;
            let totalChores = 0;
            let totalBad = 0;
            
            for (let i = 1; i <= daysInMonth; i++) {
                if (completed[i]) {
                    totalCompleted++;
                    const rating = ratings[i] || { suns: 0, moons: 0, stars: 0, books: 0, chores: 0, bad: 0 };
                    totalSuns += rating.suns;
                    totalMoons += rating.moons;
                    totalStars += rating.stars;
                    totalBooks += rating.books;
                    totalChores += rating.chores || 0;
                    totalBad += rating.bad;
                }
            }
            
            const percentage = Math.round((totalCompleted / daysInMonth) * 100);
            const childName = child === 'maya' ? 'Maya' : 'Surya';
            const spinsAvailable = getSpinsAvailable();
            const spinsEarned = getSpinsEarned();
            const spinsUsed = getSpinsUsed();
            
            const statsContent = document.getElementById('statsContent');
            statsContent.innerHTML = `
                <div class="stat-card">
                    <div class="stat-title">${animal.month}</div>
                    <div class="stat-value">${totalCompleted} / ${daysInMonth}</div>
                    <div class="stat-title" style="margin-top: 10px;">Days Completed (${percentage}%)</div>
                </div>
                
                <div class="stat-card" style="border-left-color: #FFD700;">
                    <div class="stat-title">üé∞ Spin Status</div>
                    <div class="stat-value">${spinsAvailable}</div>
                    <div class="stat-title" style="margin-top: 10px;">Spins Available (${spinsUsed} used of ${spinsEarned} earned)</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-title">Good Behavior & Activities</div>
                    <div class="stat-icons">
                        <div class="stat-icon-item">
                            <span>‚òÄÔ∏è</span>
                            <span>${totalSuns}</span>
                        </div>
                        <div class="stat-icon-item">
                            <span>üåô</span>
                            <span>${totalMoons}</span>
                        </div>
                        <div class="stat-icon-item">
                            <span>üìö</span>
                            <span>${totalBooks}</span>
                        </div>
                        <div class="stat-icon-item">
                            <span>üßπ</span>
                            <span>${totalChores}</span>
                        </div>
                        <div class="stat-icon-item">
                            <span>‚≠ê</span>
                            <span>${totalStars}</span>
                        </div>
                    </div>
                </div>
                
                ${totalBad > 0 ? `
                <div class="stat-card" style="border-left-color: #FF6B6B;">
                    <div class="stat-title">Areas to Improve</div>
                    <div class="stat-icons">
                        <div class="stat-icon-item">
                            <span>‚ùå</span>
                            <span style="color: #FF6B6B;">${totalBad}</span>
                        </div>
                    </div>
                </div>
                ` : ''}
                
                <div class="stat-card" style="background: linear-gradient(135deg, #fff9e6 0%, #ffd54f 100%);">
                    <div class="stat-title">Total Points</div>
                    <div class="stat-value">${totalSuns + totalMoons + totalStars + totalBooks + totalChores}</div>
                    <div class="stat-title" style="margin-top: 10px;">üåü Keep it up, ${childName}!</div>
                </div>
            `;
        }

        function resetChart() {
            const key = getStorageKey();
            completedData[key] = {};
            completedData[key + '_ratings'] = {};
            completedData[key + '_spinsUsed'] = 0;
            completedData[key + '_bonusUsed'] = false;
            completedData[key + '_rewardHistory'] = [];
            completedData[key + '_photos'] = [];
            weeklySpinsRemaining = 0;
            bonusSpinRemaining = 1;
            saveData();
            updateChart();
            vibrate(20);
            alert('‚úÖ Month reset!');
        }

        function exportData() {
            const dataStr = JSON.stringify(completedData, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            const date = new Date().toISOString().split('T')[0];
            a.download = `reward-chart-backup-${date}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            vibrate(20);
            alert('‚úÖ Backup saved! Check your Downloads folder.');
        }

        function importData(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const imported = JSON.parse(e.target.result);
                    if (confirm('‚ö†Ô∏è This will replace ALL current data. Continue?')) {
                        completedData = imported;
                        saveData();
                        updateChart();
                        vibrate([20, 50, 20]);
                        alert('‚úÖ Data restored successfully!');
                    }
                } catch (err) {
                    alert('‚ùå Invalid backup file. Please try again.');
                }
            };
            reader.readAsText(file);
            event.target.value = '';
        }

        initMonthSelector();
        loadData();
        updateChart();
    </script>
</body>
</html>
